---
import { getCollection, render } from 'astro:content'
import CommunityLinks from '../../components/blog/CommunityLinks.astro'
import BlogLayout from '../../layouts/BlogLayout.astro'

export async function getStaticPaths() {
  const blogEntries = await getCollection('blog')
  const defaultLang = 'en'

  return blogEntries
    .filter((entry) => entry.data.lang === defaultLang)
    .map((entry) => {
      return {
        params: { id: entry.id },
        props: { entry }
      }
    })
}

const { entry } = Astro.props
const { Content } = await render(entry)
---

<BlogLayout frontmatter={entry.data}>
  <Content />
  <CommunityLinks lang={entry.data.lang} />
</BlogLayout>
