---
const { dir, pagination, entry } = Astro.locals.starlightRoute;
const { prev, next } = pagination;
const isRtl = dir === "rtl";

const titleForTracking =
  (entry?.data?.title && String(entry.data.title).trim()) ||
  "Interledger Developers Docs";

const formatEventName = (direction: "Previous" | "Next", target?: string) => {
  const targetSegment = target?.trim() ? ` - ${target.trim()}` : "";
  return `${titleForTracking} - Pagination ${direction}${targetSegment}`;
};

const arrowPath =
  "M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z";

const arrowClass = (flip: boolean) =>
  ["arrow-icon", flip ? "arrow-icon--flip" : ""].filter(Boolean).join(" ");
---

<div class="pagination-links print:hidden" dir={dir}>
  {
    prev && (
      <a href={prev.href} rel="prev" data-umami-event={formatEventName("Previous", prev.label)}>
        <svg
          aria-hidden="true"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="currentColor"
          class={arrowClass(isRtl)}
        >
          <path d={arrowPath}></path>
        </svg>
        <span>
          {Astro.locals.t("page.previousLink")}
          <br />
          <span class="link-title">{prev.label}</span>
        </span>
      </a>
    )
  }
  {
    next && (
      <a href={next.href} rel="next" data-umami-event={formatEventName("Next", next.label)}>
        <svg
          aria-hidden="true"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="currentColor"
          class={arrowClass(!isRtl)}
        >
          <path d={arrowPath}></path>
        </svg>
        <span>
          {Astro.locals.t("page.nextLink")}
          <br />
          <span class="link-title">{next.label}</span>
        </span>
      </a>
    )
  }
</div>

<style>
  @layer starlight.core {
    .pagination-links {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(min(18rem, 100%), 1fr));
      gap: 1rem;
    }

    a {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      gap: 0.5rem;
      width: 100%;
      flex-basis: calc(50% - 0.5rem);
      flex-grow: 1;
      border: 1px solid var(--sl-color-gray-5);
      border-radius: 0.5rem;
      padding: 1rem;
      text-decoration: none;
      color: var(--sl-color-gray-2);
      box-shadow: var(--sl-shadow-md);
      overflow-wrap: anywhere;
    }
    [rel="next"] {
      justify-content: end;
      text-align: end;
      flex-direction: row-reverse;
    }
    a:hover {
      border-color: var(--sl-color-gray-2);
    }

    .link-title {
      color: var(--sl-color-white);
      font-size: var(--sl-text-2xl);
      line-height: var(--sl-line-height-headings);
    }

    svg {
      flex-shrink: 0;
    }

    .arrow-icon {
      width: 1.5rem;
      height: 1.5rem;
    }

    .arrow-icon--flip {
      transform: scaleX(-1);
    }
  }
</style>

